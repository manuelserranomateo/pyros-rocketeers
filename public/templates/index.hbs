{{> navbar}}
{{> header}}
{{> messages}}
<main>
    <div class="container">
        <div class="row gy-4">
            {{#each this.products}}
            <div class="col-12 col-md-6 col-lg-4 col-xl-3">
                <div class="card text-dark bg-light">
                    <div class="card-header text-light" style="background-color: #555555;">{{this.title}}</div>
                    <img src="{{this.url}}" style="background-color: #555555;">
                    <div class="card-body" style="background-color: #555555;">
                        <p class="card-text text-light" style="background-color: #555555;">
                            {{this.description}}
                        </p>
                        <div class="row justify-content-around">
                            <p class=" col-6 text-light" style="font-size: 30px;">
                                <b>{{formatPrice this.price}}</b>
                            </p>
                            <a style="height: 50px; font-size: 20px;"
                                onclick="addItem(event, '{{_id}}') ,navigateTo(event, event.target.href)"
                                class="col-4 btn btn-success bi bi-cart4 {{#unless ../user}}disabled{{/unless}}">
                                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"
                                    class="bi bi-cart4" viewBox="0 0 16 16">
                                    <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 
                                        .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 
                                        0 0 1-.5-.5zM3.14 5l.5 2H5V5H3.14zM6 5v2h2V5H6zm3 0v2h2V5H9zm3 
                                        0v2h1.36l.5-2H12zm1.11 3H12v2h.61l.5-2zM11 8H9v2h2V8zM8 8H6v2h2V8zM5 
                                        8H3.89l.5 2H5V8zm0 5a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 
                                        0zm9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0z" />
                                </svg></a>
                        </div>
                    </div>
                </div>
            </div>
            {{/each}}
        </div>
    </div>
</main>
<script>
    function addItem(event, pid) {
        event.preventDefault();
        Model.addItem(pid).done(function () {
            navigateTo(event, event.target.href); 
        }).fail(function (error) {
            console.error('ADDITEM ERROR ',
                error.status,
                error.statusText);
        });
    };
</script>
{{> footer}}